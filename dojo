#!/usr/bin/env python3
"""
dojo - Simple CLI for running Urbit dojo commands

Usage:
    ./dojo "(add 5 4)"
    ./dojo "now"
    ./dojo "+hello 'world'"
"""

import sys
import os

# Add current directory to path so we can import urbit_dojo
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from urbit_dojo import quick_run


def main():
    if len(sys.argv) < 2 or len(sys.argv) > 3:
        print("Usage: ./dojo \"<command>\" [timeout]")
        print("Examples:")
        print("  ./dojo \"(add 5 4)\"")
        print("  ./dojo \"now\"")
        print("  ./dojo \"+hello 'world'\"")
        print("  ./dojo \"|commit %spv-test\" 60")
        sys.exit(1)
    
    command = sys.argv[1]
    timeout = float(sys.argv[2]) if len(sys.argv) == 3 else None
    result = quick_run(command, timeout)
    print(result)


if __name__ == "__main__":
    main()